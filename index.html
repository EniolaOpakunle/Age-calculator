<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="icon" type="image/png" sizes="32x32" href="./assets/images/favicon-32x32.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-rbsA2VBKQhggwzxH7pPCaAqO46MgnOM80zW1RWuH61DGLwZJEdK2Kadq2F9CUG65" crossorigin="anonymous">
  <link rel="stylesheet" href="main.css">
  <title>Frontend Mentor | Age calculator app</title>
</head>
<body>
  <section class="calculator w-50 m-auto">
    <div class="d-flex">
      <div>
        <h4>DAY</h4>
        <input type="number" placeholder="DD" id="day" class="rounded">
        <p id="dayValidation" class="text-danger"></p>
      </div>
      <div class="mx-3">
        <h4>MONTH</h4>
        <input type="number" placeholder="MM" id="month" class="rounded">
        <p id="monthValidation" class="text-danger"></p>
      </div>
      <div>
        <h4>YEAR</h4>
        <input type="number" placeholder="YYYY" id="year" class="rounded">
        <p id="yearValidation" class="text-danger"></p>
      </div>
    </div>
    <div class="d-flex align-items-center ">
      <p class="block"></p>
      <img src="assets//images//icon-arrow.svg" alt="" class="rounded-pill p-2" onclick="calculate()">
    </div>
    <div class="display-container column">
      <p class="valueText my-0"><span class="value" id="years">--</span> years</p>
      <p class="valueText my-0"><span class="value" id="months">--</span> months</p>
      <p class="valueText my-0"><span class="value" id="days">--</span> days</p>
    </div>
  </section>
  
  <div class="attribution text-center">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Eniola Opakunle</a>.
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-kenU1KFdBIe4zVF0s0G1M5b4hcpxyD9F7jL+jjXkk+Q2h455rYXK/7HAuoJl+0I4" crossorigin="anonymous"></script>
  <script>
    const date = new Date()
    let currentYear = date.getFullYear()
    let currentMonth = date.getMonth() + 1
    let currentDay = date.getDate()
    var birthDay;
    var birthMonth;
    var birthYear;
    var validationMessage = 'This field is required'

    function validate(){
      birthDay = day.value;
      birthMonth = month.value;
      birthYear = year.value;
      validateDay = false;
      validateMonth = false;
      validateYear = false;
      evenYear = birthYear % 4
      if(birthDay == ''){
        dayValidation.innerHTML = validationMessage;
      }
      else if(birthDay > 31){
        dayValidation.innerHTML = 'Must be a valid day'
      }
      else{
        validateDay = true;
      }

      if(birthMonth == ''){
        monthValidation.innerHTML = validationMessage;
      }
      else if(birthMonth > 12 || birthMonth < 1){
        monthValidation.innerHTML = 'Must be a valid month'
      }
      else if (birthMonth == 1 || birthMonth == 3 || birthMonth == 5 || birthMonth == 7 || birthMonth == 8 || birthMonth == 10 || birthMonth == 12) {
        if (birthDay > 31) {
          dayValidation.innerHTML = 'Must be a valid day'
        }
        else{
          validateMonth = true;
        }
      }
      else if (birthMonth == 4 || birthMonth == 6 || birthMonth == 9 || birthMonth == 11) {
        if (birthDay > 30) {
          dayValidation.innerHTML = 'Must be a valid day'
        } 
        else{
          validateMonth = true;
        }
      }
      else if(birthMonth == 2 && evenYear == 0 && birthDay > 29){
        dayValidation.innerHTML = 'Must be a valid day'
      }
      else if(birthMonth == 2 && evenYear != 0 && birthDay > 28){
        dayValidation.innerHTML = 'Must be a valid day'
      }
      else{
        validateMonth = true;
      }

      if (birthYear == ''){
        yearValidation.innerHTML = validationMessage;
      }
      else if(birthYear > currentYear){
        yearValidation.innerHTML = 'Must be in the past';
      }
      else if (birthYear == currentYear) {
        if (currentMonth < birthMonth) {
          monthValidation.innerHTML = 'It must be in the past';
        } 
      }
      else{
        validateYear = true;
      }
    }
    function calculate(){
      validate()
      if(validateDay == true && validateMonth == true && validateYear == true){
        dayValidation.innerHTML = ''
        monthValidation.innerHTML = ''
        yearValidation.innerHTML = ''
        birthYear = currentYear - birthYear ;
        birthMonth = currentMonth - birthMonth;
        birthDay = currentDay - birthDay

        if (birthDay < 0) {
          birthMonth -= 1;
          birthDay += 30;
        }
        if (birthMonth < 0) {
          birthYear -= 1;
          birthMonth += 12
        }
        years.innerHTML = birthYear;
        months.innerHTML = birthMonth;
        days.innerHTML = birthDay;

      }
    }
  </script>

</body>
</html>